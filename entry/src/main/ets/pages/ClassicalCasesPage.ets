import { NavigationBar } from '../components/NavigationBar'
import router from '@ohos.router'

/**
 * å¤ç±æ¡ˆä¾‹æ•°æ®ç»“æ„
 */
class ClassicalCase {
  id: string = '';
  title: string = '';
  source: string = '';
  sourceDetail: string = '';
  datetime: CaseDateTime = new CaseDateTime();
  expectedJu: string = '';
  keyPatterns: string[] = [];
  analysis: string[] = [];
  conclusion: string = '';
  studyPoints: string[] = [];
  miniPalaceData: MiniPalaceData = new MiniPalaceData();
}

class CaseDateTime {
  year: number = 0;
  month: number = 0;
  day: number = 0;
  hour: number = 0;
  minute: number = 0;
}

class MiniPalaceData {
  palaces: MiniPalaceInfo[] = [];
  juLabel: string = '';
  zhiFuIndex: number = 0;
  zhiShiIndex: number = 0;
}

class MiniPalaceInfo {
  index: number = 0;
  name: string = '';
  star: string = '';
  door: string = '';
  tianGan: string = '';
  patterns: string[] = [];
}

/**
 * å¤ç±æ¡ˆä¾‹é‡æ¼”é¡µé¢
 */
@Entry
@Component
struct ClassicalCasesPage {
  @State cases: ClassicalCase[] = this.buildCases()

  aboutToAppear() {
    this.cases = this.buildCases();
  }

  private buildCases(): ClassicalCase[] {
    const caseList: ClassicalCase[] = [];

    // æ¡ˆä¾‹1ï¼šå†¬è‡³é˜³éä¸€å±€Â·å¤©éæ ¼
    const case1 = new ClassicalCase();
    case1.id = 'case_001';
    case1.title = 'å†¬è‡³é˜³éä¸€å±€Â·å¤©éæ ¼';
    case1.source = 'ä¸­å·Â·é‡Šå¤©é';
    case1.sourceDetail = 'åŸæ–‡ï¼š"ä¸™ä¸ºæœˆå¥‡ï¼Œä¸´ç”Ÿé—¨æˆ–å¼€ä¼‘é—¨ï¼Œè°“ä¹‹å¤©éï¼Œå¾—æ—¥ç²¾ä¹‹è”½ï¼Œå®œäº‰è®¼ã€é™ˆè¯‰ã€ä¸Šä¹¦ç­‰ã€‚"';
    case1.datetime.year = 2024;
    case1.datetime.month = 12;
    case1.datetime.day = 22;
    case1.datetime.hour = 9;
    case1.datetime.minute = 0;
    case1.expectedJu = 'é˜³éä¸€å±€';
    case1.keyPatterns = ['å¤©é', 'ä¸‰å¥‡å¾—ä½¿'];
    case1.analysis = [
      'æœ¬å±€ä¸ºå†¬è‡³åé˜³éä¸€å±€ï¼Œä¸™å¥‡ä¸´ç”Ÿé—¨äºè‰®å®«',
      'ç”Ÿé—¨ä¸ºä¸‰å‰é—¨ä¹‹é¦–ï¼Œä¸»ç”Ÿé•¿å‘å±•ã€åˆ›é€ æ¨è¿›',
      'ä¸™ä¸ºæœˆå¥‡ï¼Œä¸´ç”Ÿé—¨å³æ„æˆ"å¤©é"æ ¼å±€',
      'ç”Ÿé—¨åŒæ—¶ä¸ºå€¼ä½¿é—¨ï¼Œä¸™å¥‡ä¸´å€¼ä½¿é—¨åˆæˆ"ä¸‰å¥‡å¾—ä½¿"'
    ];
    case1.conclusion = 'åŒé‡å‰æ ¼å åŠ ï¼Œåˆ©äºå…¬å¼€æ¨è¿›ã€ä¸Šä¹¦é™ˆè¯‰ã€ä¸»åŠ¨å‡ºå‡»ç±»äº‹é¡¹ã€‚';
    case1.studyPoints = [
      'ç†è§£å¤©éæ ¼çš„æ„æˆè¦ç´ ï¼šä¸™å¥‡+ä¸‰å‰é—¨',
      'è§‚å¯Ÿä¸‰å¥‡å¾—ä½¿çš„å åŠ æ•ˆåº”',
      'æŒæ¡é˜³éä¸€å±€çš„åŸºæœ¬å¸ƒå±€è§„å¾‹'
    ];

    const miniData1 = new MiniPalaceData();
    miniData1.juLabel = 'é˜³éä¸€å±€';
    miniData1.zhiFuIndex = 0;
    miniData1.zhiShiIndex = 7;

    const palaces1: MiniPalaceInfo[] = [];
    for (let i = 0; i < 9; i++) {
      const p = new MiniPalaceInfo();
      p.index = i;
      palaces1.push(p);
    }
    palaces1[0].name = 'åä¸€'; palaces1[0].star = 'å¤©è“¬'; palaces1[0].door = 'ä¼‘é—¨'; palaces1[0].tianGan = 'æˆŠ';
    palaces1[1].name = 'å¤äºŒ'; palaces1[1].star = 'å¤©ä»»'; palaces1[1].door = 'æ­»é—¨'; palaces1[1].tianGan = 'å·±';
    palaces1[2].name = 'éœ‡ä¸‰'; palaces1[2].star = 'å¤©å†²'; palaces1[2].door = 'ä¼¤é—¨'; palaces1[2].tianGan = 'åºš';
    palaces1[3].name = 'å·½å››'; palaces1[3].star = 'å¤©è¾…'; palaces1[3].door = 'æœé—¨'; palaces1[3].tianGan = 'è¾›';
    palaces1[4].name = 'ä¸­äº”'; palaces1[4].star = 'å¤©ç¦½'; palaces1[4].door = '-'; palaces1[4].tianGan = '-';
    palaces1[5].name = 'ä¹¾å…­'; palaces1[5].star = 'å¤©å¿ƒ'; palaces1[5].door = 'å¼€é—¨'; palaces1[5].tianGan = 'å£¬';
    palaces1[6].name = 'å…‘ä¸ƒ'; palaces1[6].star = 'å¤©æŸ±'; palaces1[6].door = 'æƒŠé—¨'; palaces1[6].tianGan = 'ç™¸';
    palaces1[7].name = 'è‰®å…«'; palaces1[7].star = 'å¤©èŠ®'; palaces1[7].door = 'ç”Ÿé—¨'; palaces1[7].tianGan = 'ä¸™'; palaces1[7].patterns = ['å¤©é', 'ä¸‰å¥‡å¾—ä½¿'];
    palaces1[8].name = 'ç¦»ä¹'; palaces1[8].star = 'å¤©è‹±'; palaces1[8].door = 'æ™¯é—¨'; palaces1[8].tianGan = 'ä¸';

    miniData1.palaces = palaces1;
    case1.miniPalaceData = miniData1;
    caseList.push(case1);

    // æ¡ˆä¾‹2ï¼šæ˜¥åˆ†é˜³éå››å±€Â·é’é¾™è¿”é¦–
    const case2 = new ClassicalCase();
    case2.id = 'case_002';
    case2.title = 'æ˜¥åˆ†é˜³éå››å±€Â·é’é¾™è¿”é¦–';
    case2.source = 'ä¸­å·Â·é’é¾™è¿”é¦–';
    case2.sourceDetail = 'åŸæ–‡ï¼šâ€œå…­ç”²åŠ å…­ä¸™ï¼Œè°“ä¹‹é’é¾™è¿”é¦–ï¼Œé€ ä¸¾ç™¾äº‹çš†å‰ã€‚â€';
    case2.datetime.year = 2025;
    case2.datetime.month = 3;
    case2.datetime.day = 20;
    case2.datetime.hour = 11;
    case2.datetime.minute = 0;
    case2.expectedJu = 'é˜³éå››å±€';
    case2.keyPatterns = ['é’é¾™è¿”é¦–'];
    case2.analysis = [
      'æœ¬å±€ä¸ºæ˜¥åˆ†åé˜³éå››å±€ï¼Œå¤©ç›˜ç”²ï¼ˆä»¥æˆŠä»£ç”²ï¼‰åŠ åœ°ç›˜ä¸™',
      'é’é¾™è¿”é¦–ä¸ºé¾™å›é¦–ä¹‹è±¡ï¼Œä¸»å£°åŠ¿å¤§æŒ¯',
      'æ­¤æ ¼ç‰¹åˆ«åˆ©äºæ–‡ä¹¦ç«äº‰ã€å…¬å¼€æ¨è¿›ç±»äº‹é¡¹',
      'ç¦»å®«æ™¯é—¨é…åˆï¼Œæ›´æ˜¾å…‰æ˜æ­£å¤§ä¹‹åŠ¿'
    ];
    case2.conclusion = 'å¤§å‰æ ¼å±€ï¼Œé€ ä¸¾ç™¾äº‹çš†å®œï¼Œå°¤åˆ©å…¬å¼€ç«äº‰ã€æ–‡ä¹¦è¯‰æ±‚ã€‚';
    case2.studyPoints = [
      'è¯†åˆ«å…­ç”²åŠ å…­ä¸™çš„æ ¼å±€ç‰¹å¾',
      'ç†è§£â€œé¾™å›é¦–â€çš„è±¡æ„å†…æ¶µ',
      'è§‚å¯Ÿé˜³éå››å±€çš„æ—¶ç©ºç‰¹ç‚¹'
    ];

    const miniData2 = new MiniPalaceData();
    miniData2.juLabel = 'é˜³éå››å±€';
    miniData2.zhiFuIndex = 3;
    miniData2.zhiShiIndex = 3;

    const palaces2: MiniPalaceInfo[] = [];
    for (let i = 0; i < 9; i++) {
      const p = new MiniPalaceInfo();
      p.index = i;
      palaces2.push(p);
    }
    palaces2[0].name = 'åä¸€'; palaces2[0].star = 'å¤©è“¬'; palaces2[0].door = 'ä¼‘é—¨'; palaces2[0].tianGan = 'å·±';
    palaces2[1].name = 'å¤äºŒ'; palaces2[1].star = 'å¤©ä»»'; palaces2[1].door = 'æ­»é—¨'; palaces2[1].tianGan = 'åºš';
    palaces2[2].name = 'éœ‡ä¸‰'; palaces2[2].star = 'å¤©å†²'; palaces2[2].door = 'ä¼¤é—¨'; palaces2[2].tianGan = 'è¾›';
    palaces2[3].name = 'å·½å››'; palaces2[3].star = 'å¤©è¾…'; palaces2[3].door = 'æœé—¨'; palaces2[3].tianGan = 'å£¬';
    palaces2[4].name = 'ä¸­äº”'; palaces2[4].star = 'å¤©ç¦½'; palaces2[4].door = '-'; palaces2[4].tianGan = '-';
    palaces2[5].name = 'ä¹¾å…­'; palaces2[5].star = 'å¤©å¿ƒ'; palaces2[5].door = 'å¼€é—¨'; palaces2[5].tianGan = 'ç™¸';
    palaces2[6].name = 'å…Œä¸ƒ'; palaces2[6].star = 'å¤©æŸ±'; palaces2[6].door = 'æƒŠé—¨'; palaces2[6].tianGan = 'ç”²';
    palaces2[7].name = 'è‰®å…«'; palaces2[7].star = 'å¤©èŠ®'; palaces2[7].door = 'ç”Ÿé—¨'; palaces2[7].tianGan = 'ä¹™';
    palaces2[8].name = 'ç¦»ä¹'; palaces2[8].star = 'å¤©è‹±'; palaces2[8].door = 'æ™¯é—¨'; palaces2[8].tianGan = 'æˆŠ'; palaces2[8].patterns = ['é’é¾™è¿”é¦–'];

    miniData2.palaces = palaces2;
    case2.miniPalaceData = miniData2;
    caseList.push(case2);

    // æ¡ˆä¾‹3ï¼šå¤è‡³é˜´éä¹å±€Â·é£é¸Ÿè·Œç©´
    const case3 = new ClassicalCase();
    case3.id = 'case_003';
    case3.title = 'å¤è‡³é˜´éä¹å±€Â·é£é¸Ÿè·Œç©´';
    case3.source = 'ä¸­å·Â·é£é¸Ÿè·Œç©´';
    case3.sourceDetail = 'åŸæ–‡ï¼šâ€œå…­ä¸™åŠ å…­ç”²ï¼Œè°“ä¹‹é£é¸Ÿè·Œç©´ï¼Œç™¾äº‹çš†å‰ã€‚â€';
    case3.datetime.year = 2024;
    case3.datetime.month = 6;
    case3.datetime.day = 21;
    case3.datetime.hour = 15;
    case3.datetime.minute = 0;
    case3.expectedJu = 'é˜´éä¹å±€';
    case3.keyPatterns = ['é£é¸Ÿè·Œç©´'];
    case3.analysis = [
      'æœ¬å±€ä¸ºå¤è‡³åé˜´éä¹å±€ï¼Œå¤©ç›˜ä¸™åŠ åœ°ç›˜ç”²ï¼ˆä»¥æˆŠä»£ç”²ï¼‰',
      'é£é¸Ÿè·Œç©´ä¸ºé¸Ÿå½’å·¢ä¹‹è±¡ï¼Œä¸»è®¡åˆ’è½åœ°ã€ç¨³å¥æ¨è¿›',
      'ä¸é’é¾™è¿”é¦–å¯¹åº”ï¼Œä¸€ä¸»å£°åŠ¿ã€ä¸€ä¸»è½å®',
      'å¤å®«æ­»é—¨è™½å‡¶ï¼Œä½†æ ¼å±€å¯åŒ–è§£éƒ¨åˆ†å‡¶æ€§'
    ];
    case3.conclusion = 'å¤§å‰æ ¼å±€ï¼Œç™¾äº‹çš†å‰ï¼Œåˆ©äºè®¡åˆ’è½åœ°ã€ç¨³å¥æ¨è¿›ã€‚';
    case3.studyPoints = [
      'è¯†åˆ«å…­ä¸™åŠ å…­ç”²çš„æ ¼å±€ç‰¹å¾',
      'ç†è§£â€œé¸Ÿå½’å·¢â€çš„è±¡æ„ä¸é’é¾™è¿”é¦–çš„å¯¹æ¯”',
      'è§‚å¯Ÿé˜´éä¹å±€çš„æ—¶ç©ºç‰¹ç‚¹'
    ];

    const miniData3 = new MiniPalaceData();
    miniData3.juLabel = 'é˜´éä¹å±€';
    miniData3.zhiFuIndex = 8;
    miniData3.zhiShiIndex = 1;

    const palaces3: MiniPalaceInfo[] = [];
    for (let i = 0; i < 9; i++) {
      const p = new MiniPalaceInfo();
      p.index = i;
      palaces3.push(p);
    }
    palaces3[0].name = 'åä¸€'; palaces3[0].star = 'å¤©è“¬'; palaces3[0].door = 'ä¼‘é—¨'; palaces3[0].tianGan = 'ä¹™';
    palaces3[1].name = 'å¤äºŒ'; palaces3[1].star = 'å¤©ä»»'; palaces3[1].door = 'æ­»é—¨'; palaces3[1].tianGan = 'ä¸™'; palaces3[1].patterns = ['é£é¸Ÿè·Œç©´'];
    palaces3[2].name = 'éœ‡ä¸‰'; palaces3[2].star = 'å¤©å†²'; palaces3[2].door = 'ä¼¤é—¨'; palaces3[2].tianGan = 'ä¸';
    palaces3[3].name = 'å·½å››'; palaces3[3].star = 'å¤©è¾…'; palaces3[3].door = 'æœé—¨'; palaces3[3].tianGan = 'å·±';
    palaces3[4].name = 'ä¸­äº”'; palaces3[4].star = 'å¤©ç¦½'; palaces3[4].door = '-'; palaces3[4].tianGan = '-';
    palaces3[5].name = 'ä¹¾å…­'; palaces3[5].star = 'å¤©å¿ƒ'; palaces3[5].door = 'å¼€é—¨'; palaces3[5].tianGan = 'è¾›';
    palaces3[6].name = 'å…Œä¸ƒ'; palaces3[6].star = 'å¤©æŸ±'; palaces3[6].door = 'æƒŠé—¨'; palaces3[6].tianGan = 'åºš';
    palaces3[7].name = 'è‰®å…«'; palaces3[7].star = 'å¤©èŠ®'; palaces3[7].door = 'ç”Ÿé—¨'; palaces3[7].tianGan = 'å£¬';
    palaces3[8].name = 'ç¦»ä¹'; palaces3[8].star = 'å¤©è‹±'; palaces3[8].door = 'æ™¯é—¨'; palaces3[8].tianGan = 'æˆŠ';

    miniData3.palaces = palaces3;
    case3.miniPalaceData = miniData3;
    caseList.push(case3);

    // æ¡ˆä¾‹4ï¼šç§‹åˆ†é˜´éä¸‰å±€Â·äººéæ ¼
    const case4 = new ClassicalCase();
    case4.id = 'case_004';
    case4.title = 'ç§‹åˆ†é˜´éä¸‰å±€Â·äººéæ ¼';
    case4.source = 'ä¸­å·Â·é‡Šäººé';
    case4.sourceDetail = 'åŸæ–‡ï¼šâ€œä¸ä¸ºæ˜Ÿå¥‡ï¼Œä¸´æœé—¨ï¼Œè°“ä¹‹äººéï¼Œå¾—æ˜Ÿç²¾ä¹‹è”½ï¼Œå®œæ½œè—ã€åŒ¿å½¢ã€å’Œè°ˆç­‰ã€‚â€';
    case4.datetime.year = 2024;
    case4.datetime.month = 9;
    case4.datetime.day = 22;
    case4.datetime.hour = 21;
    case4.datetime.minute = 0;
    case4.expectedJu = 'é˜´éä¸‰å±€';
    case4.keyPatterns = ['äººé'];
    case4.analysis = [
      'æœ¬å±€ä¸ºç§‹åˆ†åé˜´éä¸‰å±€ï¼Œä¸å¥‡ä¸´æœé—¨äºå·½å®«',
      'æœé—¨ä¸»é—­å¡éšè—ï¼Œä¸ä¸ºæ˜Ÿå¥‡ï¼Œä¸´æœé—¨å³æˆäººé',
      'äººéå¾—äººå’Œä¹‹åŠ©ï¼Œæœ€åˆ©éšè”½è¡Œäº‹ã€å¯†è°‹å’Œè°ˆ',
      'å·½å®«ä¸ºä¸œå—æ–¹ï¼Œå¯¹åº”é£è±¡ï¼Œæœ‰éšé£æ½œå…¥ä¹‹æ„'
    ];
    case4.conclusion = 'åˆ©éšè”½äº‹é¡¹ï¼Œå®œæ½œè—åŒ¿å½¢ã€å¯†è°‹å’Œè°ˆã€é—­å…³ä¿®ç‚¼ã€‚';
    case4.studyPoints = [
      'ç†è§£äººéæ ¼çš„æ„æˆè¦ç´ ï¼šä¸å¥‡+æœé—¨',
      'å¯¹æ¯”å¤©éã€åœ°éã€äººéä¸‰éçš„å·®å¼‚',
      'æŒæ¡éšè”½ç±»äº‹é¡¹çš„é€‰æ—¶åŸåˆ™'
    ];

    const miniData4 = new MiniPalaceData();
    miniData4.juLabel = 'é˜´éä¸‰å±€';
    miniData4.zhiFuIndex = 2;
    miniData4.zhiShiIndex = 3;

    const palaces4: MiniPalaceInfo[] = [];
    for (let i = 0; i < 9; i++) {
      const p = new MiniPalaceInfo();
      p.index = i;
      palaces4.push(p);
    }
    palaces4[0].name = 'åä¸€'; palaces4[0].star = 'å¤©è“¬'; palaces4[0].door = 'ä¼‘é—¨'; palaces4[0].tianGan = 'ç™¸';
    palaces4[1].name = 'å¤äºŒ'; palaces4[1].star = 'å¤©ä»»'; palaces4[1].door = 'æ­»é—¨'; palaces4[1].tianGan = 'å£¬';
    palaces4[2].name = 'éœ‡ä¸‰'; palaces4[2].star = 'å¤©å†²'; palaces4[2].door = 'ä¼¤é—¨'; palaces4[2].tianGan = 'æˆŠ';
    palaces4[3].name = 'å·½å››'; palaces4[3].star = 'å¤©è¾…'; palaces4[3].door = 'æœé—¨'; palaces4[3].tianGan = 'ä¸'; palaces4[3].patterns = ['äººé'];
    palaces4[4].name = 'ä¸­äº”'; palaces4[4].star = 'å¤©ç¦½'; palaces4[4].door = '-'; palaces4[4].tianGan = '-';
    palaces4[5].name = 'ä¹¾å…­'; palaces4[5].star = 'å¤©å¿ƒ'; palaces4[5].door = 'å¼€é—¨'; palaces4[5].tianGan = 'å·±';
    palaces4[6].name = 'å…Œä¸ƒ'; palaces4[6].star = 'å¤©æŸ±'; palaces4[6].door = 'æƒŠé—¨'; palaces4[6].tianGan = 'åºš';
    palaces4[7].name = 'è‰®å…«'; palaces4[7].star = 'å¤©èŠ®'; palaces4[7].door = 'ç”Ÿé—¨'; palaces4[7].tianGan = 'è¾›';
    palaces4[8].name = 'ç¦»ä¹'; palaces4[8].star = 'å¤©è‹±'; palaces4[8].door = 'æ™¯é—¨'; palaces4[8].tianGan = 'ä¸™';

    miniData4.palaces = palaces4;
    case4.miniPalaceData = miniData4;
    caseList.push(case4);

    // æ¡ˆä¾‹5ï¼šç«‹æ˜¥é˜³éä¸ƒå±€Â·ä¸‰å¥‡å…¥å¢“
    const case5 = new ClassicalCase();
    case5.id = 'case_005';
    case5.title = 'ç«‹æ˜¥é˜³éä¸ƒå±€Â·ä¸‰å¥‡å…¥å¢“';
    case5.source = 'ä¸­å·Â·ä¸‰å¥‡å…¥å¢“';
    case5.sourceDetail = 'åŸæ–‡ï¼šâ€œä¹™å¥‡å…¥è¾°å®«ä¸ºæœ¨å¢“ï¼Œä¸™ä¸å¥‡å…¥æˆŒå®«ä¸ºç«å¢“ï¼Œä¸‰å¥‡å…¥å¢“åˆ™å‰åŠ›å¤§å‡ã€‚â€';
    case5.datetime.year = 2025;
    case5.datetime.month = 2;
    case5.datetime.day = 4;
    case5.datetime.hour = 7;
    case5.datetime.minute = 0;
    case5.expectedJu = 'é˜³éä¸ƒå±€';
    case5.keyPatterns = ['ä¸‰å¥‡å…¥å¢“'];
    case5.analysis = [
      'æœ¬å±€ä¸ºç«‹æ˜¥åé˜³éä¸ƒå±€ï¼Œä¹™å¥‡è½å…¥å·½å®«ï¼ˆè¾°ä½ï¼‰',
      'è¾°ä¸ºæœ¨ä¹‹å¢“åº“ï¼Œä¹™æœ¨å…¥è¾°å³ä¸ºä¸‰å¥‡å…¥å¢“',
      'ä¸‰å¥‡å…¥å¢“ä¸»ç²¾åè¢«æ©ã€å‰åŠ›å¤§å‡',
      'è™½æœ‰æœé—¨å¯å®ˆï¼Œä½†è°‹äº‹æ¨è¿›ä¸é¡ºï¼Œè´µäººéš¾å¾—'
    ];
    case5.conclusion = 'å¼ºå‡¶æ—¶æ®µï¼Œä¸‰å¥‡å…¥å¢“å¯¼è‡´å‰åŠ›å¤§å‡ï¼Œä¸å®œä¸»åŠ¨æ¨è¿›ã€‚';
    case5.studyPoints = [
      'è¯†åˆ«ä¸‰å¥‡å…¥å¢“çš„åˆ¤å®šæ¡ä»¶',
      'ç†è§£å¢“åº“æ¦‚å¿µï¼šè¾°æˆŒä¸‘æœªå››åº“',
      'è§‚å¯Ÿå‡¶æ ¼å¯¹æ•´ä½“ç›˜é¢çš„å½±å“'
    ];

    const miniData5 = new MiniPalaceData();
    miniData5.juLabel = 'é˜³éä¸ƒå±€';
    miniData5.zhiFuIndex = 6;
    miniData5.zhiShiIndex = 3;

    const palaces5: MiniPalaceInfo[] = [];
    for (let i = 0; i < 9; i++) {
      const p = new MiniPalaceInfo();
      p.index = i;
      palaces5.push(p);
    }
    palaces5[0].name = 'åä¸€'; palaces5[0].star = 'å¤©è“¬'; palaces5[0].door = 'ä¼‘é—¨'; palaces5[0].tianGan = 'æˆŠ';
    palaces5[1].name = 'å¤äºŒ'; palaces5[1].star = 'å¤©ä»»'; palaces5[1].door = 'æ­»é—¨'; palaces5[1].tianGan = 'å·±';
    palaces5[2].name = 'éœ‡ä¸‰'; palaces5[2].star = 'å¤©å†²'; palaces5[2].door = 'ä¼¤é—¨'; palaces5[2].tianGan = 'åºš';
    palaces5[3].name = 'å·½å››'; palaces5[3].star = 'å¤©è¾…'; palaces5[3].door = 'æœé—¨'; palaces5[3].tianGan = 'ä¹™'; palaces5[3].patterns = ['ä¸‰å¥‡å…¥å¢“'];
    palaces5[4].name = 'ä¸­äº”'; palaces5[4].star = 'å¤©ç¦½'; palaces5[4].door = '-'; palaces5[4].tianGan = '-';
    palaces5[5].name = 'ä¹¾å…­'; palaces5[5].star = 'å¤©å¿ƒ'; palaces5[5].door = 'å¼€é—¨'; palaces5[5].tianGan = 'å£¬';
    palaces5[6].name = 'å…Œä¸ƒ'; palaces5[6].star = 'å¤©æŸ±'; palaces5[6].door = 'æƒŠé—¨'; palaces5[6].tianGan = 'è¾›';
    palaces5[7].name = 'è‰®å…«'; palaces5[7].star = 'å¤©èŠ®'; palaces5[7].door = 'ç”Ÿé—¨'; palaces5[7].tianGan = 'ç™¸';
    palaces5[8].name = 'ç¦»ä¹'; palaces5[8].star = 'å¤©è‹±'; palaces5[8].door = 'æ™¯é—¨'; palaces5[8].tianGan = 'ä¸';

    miniData5.palaces = palaces5;
    case5.miniPalaceData = miniData5;
    caseList.push(case5);

    return caseList;
  }

  @Builder
  buildMiniNineGrid(caseData: ClassicalCase) {
    Column({ space: 8 }) {
      Text(caseData.miniPalaceData.juLabel)
        .fontSize(14)
        .fontWeight(FontWeight.Bold)
        .fontColor('#D4A574')
        .textAlign(TextAlign.Center)
        .width('100%')

      Column({ space: 3 }) {
        Row({ space: 3 }) {
          this.buildMiniPalaceCard(caseData.miniPalaceData.palaces[0], caseData.miniPalaceData)
          this.buildMiniPalaceCard(caseData.miniPalaceData.palaces[1], caseData.miniPalaceData)
          this.buildMiniPalaceCard(caseData.miniPalaceData.palaces[2], caseData.miniPalaceData)
        }
        .width('100%')
        .justifyContent(FlexAlign.SpaceBetween)

        Row({ space: 3 }) {
          this.buildMiniPalaceCard(caseData.miniPalaceData.palaces[3], caseData.miniPalaceData)
          this.buildMiniPalaceCard(caseData.miniPalaceData.palaces[4], caseData.miniPalaceData)
          this.buildMiniPalaceCard(caseData.miniPalaceData.palaces[5], caseData.miniPalaceData)
        }
        .width('100%')
        .justifyContent(FlexAlign.SpaceBetween)

        Row({ space: 3 }) {
          this.buildMiniPalaceCard(caseData.miniPalaceData.palaces[6], caseData.miniPalaceData)
          this.buildMiniPalaceCard(caseData.miniPalaceData.palaces[7], caseData.miniPalaceData)
          this.buildMiniPalaceCard(caseData.miniPalaceData.palaces[8], caseData.miniPalaceData)
        }
        .width('100%')
        .justifyContent(FlexAlign.SpaceBetween)
      }
      .width('100%')
    }
    .width('100%')
  }

  @Builder
  buildMiniPalaceCard(palace: MiniPalaceInfo, gridData: MiniPalaceData) {
    Stack({ alignContent: Alignment.TopEnd }) {
      Column({ space: 2 }) {
        Text(palace.name)
          .fontSize(10)
          .fontColor('#888888')
          .width('100%')
          .textAlign(TextAlign.Center)

        Text(palace.star)
          .fontSize(14)
          .fontWeight(FontWeight.Bold)
          .fontColor('#2C2416')
          .width('100%')
          .textAlign(TextAlign.Center)

        Text(palace.door)
          .fontSize(11)
          .fontColor('#555555')
          .width('100%')
          .textAlign(TextAlign.Center)

        Divider().color('#f0f0f0').strokeWidth(0.5).margin({ top: 2, bottom: 2 })

        Text(palace.tianGan)
          .fontSize(12)
          .fontWeight(FontWeight.Medium)
          .fontColor('#D4691A')
          .width('100%')
          .textAlign(TextAlign.Center)

        if (palace.patterns.length > 0) {
          Text(palace.patterns[0])
            .fontSize(8)
            .fontColor('#FFFFFF')
            .backgroundColor('#FF6B35')
            .padding({ left: 3, right: 3, top: 1, bottom: 1 })
            .borderRadius(3)
            .maxLines(1)
            .textOverflow({ overflow: TextOverflow.Ellipsis })
        }
      }
      .width('100%')
      .height(85)
      .padding(5)

      if (palace.index === gridData.zhiFuIndex) {
        Text('ç¬¦')
          .fontSize(9)
          .fontWeight(FontWeight.Bold)
          .fontColor('#FFFFFF')
          .backgroundColor('#D4A574')
          .padding({ left: 4, right: 4, top: 1, bottom: 1 })
          .borderRadius({ topRight: 6, bottomLeft: 6 })
      } else if (palace.index === gridData.zhiShiIndex) {
        Text('ä½¿')
          .fontSize(9)
          .fontWeight(FontWeight.Bold)
          .fontColor('#FFFFFF')
          .backgroundColor('#4A6A8B')
          .padding({ left: 4, right: 4, top: 1, bottom: 1 })
          .borderRadius({ topRight: 6, bottomLeft: 6 })
      }
    }
    .width('32%')
    .height(85)
    .backgroundColor(palace.patterns.length > 0 ? '#FFF8F0' : '#FFFFFF')
    .borderRadius(6)
    .border({
      width: palace.index === gridData.zhiFuIndex || palace.index === gridData.zhiShiIndex ? 1.5 : 1,
      color: palace.index === gridData.zhiFuIndex ? '#D4A574' : 
             (palace.index === gridData.zhiShiIndex ? '#4A6A8B' : '#E0E0E0')
    })
  }

  @Builder
  buildCaseCard(caseData: ClassicalCase) {
    Column({ space: 12 }) {
      Column({ space: 6 }) {
        Text(caseData.title)
          .fontSize(18)
          .fontWeight(FontWeight.Bold)
          .fontColor('#2C2416')
          .width('100%')

        Text(`ğŸ“– ${caseData.source}`)
          .fontSize(12)
          .fontColor('#888888')
          .width('100%')

        Text(caseData.sourceDetail)
          .fontSize(12)
          .fontColor('#666666')
          .lineHeight(18)
          .width('100%')
          .padding(10)
          .backgroundColor('#F8F8F8')
          .borderRadius(6)
          .border({ width: 1, color: '#E0E0E0', style: BorderStyle.Dashed })
      }
      .width('100%')
      .alignItems(HorizontalAlign.Start)

      Divider().color('#E0E0E0').strokeWidth(1)

      this.buildMiniNineGrid(caseData)

      Divider().color('#E0E0E0').strokeWidth(1)

      Row({ space: 8 }) {
        Text('ğŸ¯ å…³é”®æ ¼å±€ï¼š')
          .fontSize(13)
          .fontWeight(FontWeight.Medium)
          .fontColor('#2C2416')
        
        ForEach(caseData.keyPatterns, (pattern: string) => {
          Text(pattern)
            .fontSize(12)
            .fontColor('#FFFFFF')
            .backgroundColor('#FF6B35')
            .padding({ left: 8, right: 8, top: 3, bottom: 3 })
            .borderRadius(4)
        })
      }
      .width('100%')

      Column({ space: 6 }) {
        Text('ğŸ“Š åˆ†æè¦ç‚¹')
          .fontSize(14)
          .fontWeight(FontWeight.Medium)
          .fontColor('#2C2416')
          .width('100%')
        
        ForEach(caseData.analysis, (point: string, index: number) => {
          Row({ space: 6 }) {
            Text(`${index + 1}.`)
              .fontSize(12)
              .fontColor('#999999')
            Text(point)
              .fontSize(12)
              .fontColor('#666666')
              .lineHeight(18)
              .layoutWeight(1)
          }
          .width('100%')
          .alignItems(VerticalAlign.Top)
        })
      }
      .width('100%')
      .alignItems(HorizontalAlign.Start)
      .padding(10)
      .backgroundColor('#F8F8F8')
      .borderRadius(6)

      Column({ space: 6 }) {
        Text('âœ“ ç»“è®º')
          .fontSize(14)
          .fontWeight(FontWeight.Medium)
          .fontColor('#4CAF50')
          .width('100%')
        
        Text(caseData.conclusion)
          .fontSize(13)
          .fontColor('#2C2416')
          .lineHeight(20)
          .width('100%')
      }
      .width('100%')
      .alignItems(HorizontalAlign.Start)
      .padding(10)
      .backgroundColor('#E8F5E9')
      .borderRadius(6)

      Column({ space: 6 }) {
        Text('ğŸ’¡ ç ”ä¹ è¦ç‚¹')
          .fontSize(14)
          .fontWeight(FontWeight.Medium)
          .fontColor('#FF9800')
          .width('100%')
        
        ForEach(caseData.studyPoints, (point: string) => {
          Row({ space: 6 }) {
            Text('â€¢')
              .fontSize(12)
              .fontColor('#FF9800')
            Text(point)
              .fontSize(12)
              .fontColor('#666666')
              .lineHeight(18)
              .layoutWeight(1)
          }
          .width('100%')
          .alignItems(VerticalAlign.Top)
        })
      }
      .width('100%')
      .alignItems(HorizontalAlign.Start)
      .padding(10)
      .backgroundColor('#FFF8F0')
      .borderRadius(6)

      Button('æŸ¥çœ‹å®Œæ•´ç›˜é¢')
        .width('100%')
        .height(44)
        .fontSize(15)
        .fontWeight(FontWeight.Medium)
        .backgroundColor('#D4A574')
        .fontColor('#FFFFFF')
        .borderRadius(8)
        .onClick(() => {
          const targetDate = new Date(
            caseData.datetime.year,
            caseData.datetime.month - 1,
            caseData.datetime.day,
            caseData.datetime.hour,
            caseData.datetime.minute
          );
          
          // å°†Dateå¯¹è±¡è½¬æ¢ä¸ºæ—¶é—´æˆ³ä¼ é€’ï¼Œé¿å…åºåˆ—åŒ–é—®é¢˜
          router.pushUrl({
            url: 'pages/DunjiaPalacePage',
            params: {
              timestamp: targetDate.getTime()
            }
          });
        })
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#FFFFFF')
    .borderRadius(12)
    .shadow({ radius: 8, color: '#22000000', offsetX: 0, offsetY: 4 })
  }

  build() {
    Column({ space: 0 }) {
      NavigationBar({ title: 'å¤ç±æ¡ˆä¾‹é‡æ¼”' })

      Scroll() {
        Column({ space: 16 }) {
          Text('ä»¥ä¸‹æ¡ˆä¾‹å‡æºè‡ªã€Šæ™¯ç¥éç”²ç¬¦åº”ç»ã€‹åŸæ–‡ï¼Œæ¯ä¸ªæ¡ˆä¾‹åŒ…å«ä¹å®«ç¤ºæ„å›¾ã€æ ¼å±€åˆ†æã€ç ”ä¹ è¦ç‚¹ã€‚ç‚¹å‡»"æŸ¥çœ‹å®Œæ•´ç›˜é¢"å¯è·³è½¬è‡³ä¹å®«ç ”ä¹ é¡µæŸ¥çœ‹è¯¦ç»†æ’ç›˜ã€‚')
            .fontSize(13)
            .fontColor('#666666')
            .lineHeight(20)
            .width('100%')
            .padding(12)
            .backgroundColor('#FFF8F0')
            .borderRadius(8)

          ForEach(this.cases, (caseData: ClassicalCase) => {
            this.buildCaseCard(caseData)
          })
        }
        .width('100%')
        .padding(16)
      }
      .width('100%')
      .layoutWeight(1)
      .scrollBar(BarState.Auto)
      .edgeEffect(EdgeEffect.Spring)
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#F5F1E8')
  }
}
