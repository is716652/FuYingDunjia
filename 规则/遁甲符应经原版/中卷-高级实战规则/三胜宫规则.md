# 三胜宫规则

## 一、原文定位

出自《御制景祐遁甲符应经·中卷》“三胜宫”条：
- 汤谓曰：
  - “第一胜天乙宫，天上直符乘为天乙宫，上将居之，用兵繁其衡百胜。”
  - “若在阳遁，即用天上直符所居；若在阴遁，即用地下直符所居宫，上将居之而击其冲胜。”
- “第二胜九天宫”：
  - “阳遁天上直符后一为九天，阴遁直符前一为九天。九天我军立九天之上，而击其冲，则敌人不敢。”
- “第三胜生门宫”：
  - “谓生门合三奇之宫，上将引兵，从生门击死门，百战百胜……”
- 并附阳三局、阴八局的具体例子。

## 二、规则要点

1. **三胜宫的三种胜地**
   - 第一胜：**天乙宫**（直符之宫）
   - 第二胜：**九天宫**（直符之后一宫/前一宫）
   - 第三胜：**生门宫（合三奇）**
2. **本质含义**
   - 为用兵/行动提供“三个最佳用力点”：
     - 直符所临之宫（天乙宫）
     - 直符偏位一宫（九天）
     - 生门合三奇之宫

## 三、判定条件（工程化版本）

1. **天乙宫（第一胜）**
   - 直符所在宫：
     - 阳遁：取“天上直符所居宫”；
     - 阴遁：取“地下直符所居宫”。
   - 在你的引擎中，通常已知“直符宫索引”，可直接标记为“天乙宫”。

2. **九天宫（第二胜）**
   - 阳遁：直符宫**后一宫**即为九天宫；
   - 阴遁：直符宫**前一宫**即为九天宫；
   - 需要结合你的宫序映射规则（0–8索引对应乾坎艮震巽离坤兑中宫等）做“前一/后一”的循环计算。

3. **生门合三奇宫（第三胜）**
   - 条件：
     - 门 = 生门；
     - 该宫天盘/地盘有乙、丙、丁三奇之一或三奇合临；
   - 工程化简化建议：
     - 若某宫门为生门，且天盘天干 ∈ {乙, 丙, 丁}，即视为“第三胜宫候选”；
     - 若以后引擎支持“生门+三奇合临”的更严谨判定，再升级为“正式第三胜宫”。

## 四、吉凶与应用建议

1. **整体倾向**
   - 三胜宫不是“普通吉位”，而是**适合发起强势行动的优选位**：
     - 天乙宫：天时与主帅重心所在，宜作为主阵地或统帅位置；
     - 九天宫：高临对冲之位，宜从此攻击对方要害；
     - 生门三奇宫：生机与奇气齐聚，适合突破与进攻。

2. **现代研习语境下的转换**
   - 可视为：
     - 当前盘面中，若要研习“主动进攻/突破”的行动策略，优先考虑这三个宫所代表的方位/象意。

## 五、在APP中的推荐呈现方式

1. **在九宫盘上的标记**
   - 在 DunjiaNineGrid / SanqiNineGrid 中：
     - 对天乙宫、九天宫、生门三奇宫分别打上小徽标：
       - “一胜”、“二胜”、“三胜”，或图标化标记；
   - 在宫位详情中增加一行：
     - 如：“本宫为三胜宫之一：天乙宫（第一胜地）”。

2. **在格局总结区的说明**
   - 格局总览列表中增加“**三胜宫定位**”：
     - 列出：
       - 第一胜：X宫（宫名+方位）
       - 第二胜：Y宫
       - 第三胜：Z宫（若存在）
   - 并给出简要建议：
     - “适合研习主动突破、攻守要点的布局思路。”

## 六、后续 JSON 结构建议

若要将三胜宫规则结构化为 JSON，可参考：

```json
{
  "id": "san_sheng_gong",
  "name": "三胜宫",
  "category": "方位胜地",
  "sub_rules": [
    { "key": "tian_yi", "name": "天乙宫", "description": "直符所在之宫，为第一胜地。" },
    { "key": "jiu_tian", "name": "九天宫", "description": "阳遁直符后一宫/阴遁直符前一宫，为第二胜地。" },
    { "key": "sheng_men_san_qi", "name": "生门三奇宫", "description": "生门合三奇之宫，为第三胜地。" }
  ]
}
```

等你在工程中新建好 `中卷-高级实战规则/json数据` 文件夹后，我可以按类似结构把这一条以及前面几条（三遁、三奇入墓、六仪击刑、五阳五阴）都落成独立 JSON 文件。