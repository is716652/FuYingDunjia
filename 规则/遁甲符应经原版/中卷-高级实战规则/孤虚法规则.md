# 孤虚法规则

## 一、原文定位

出自《御制景祐遁甲符应经·中卷》“孤虚法”条：
- “黄石公曰：背孤击虚，一女可敌十夫，古法：十人用时孤，百人用日孤，千人用月孤，万人用年孤，惟有时孤最验。今立成于后。”
- 并列出各旬“孤在何地、虚在何地”：
  - 甲子旬：孤在戌亥，虚在己辰
  - 甲戌旬：孤在申酉，虚在寅卯
  - 甲申旬：孤在午未，虚在子丑
  - 甲午旬：孤在己辰，虚在戌亥
  - 甲辰旬：孤在寅卯，虚在申酉
  - 甲寅旬：孤在子丑，虚在午未

## 二、规则要点

1. **孤、虚的含义**
   - “孤”与“虚”为两类不利之位：
     - 背孤击虚 → 借对方所在孤虚之地而取胜
   - 不同规模用不同“孤”：
     - 十人用时孤、百人用日孤、千人用月孤、万人用年孤
     - 日常研习中可重点关注“时孤”
2. **按旬划分位置**
   - 以六甲旬首（甲子、甲戌、甲申、甲午、甲辰、甲寅）分六旬，每旬给出：
     - 孤在的地支
     - 虚在的地支

## 三、判定条件（工程化版本）

1. **基本思路**
   - 先确定当前所处旬：
     - 例如：甲子旬、甲戌旬等（需根据日干支推算旬首）
   - 再根据中卷表格，查出对应“孤位”“虚位”所落地支。
2. **用法示意**
   - 例如：
     - 若当前为甲子旬，则：
       - 孤在戌亥，虚在己辰
     - 在研习用兵或方位选择时，可“背孤击虚”，即背对己方孤位，击对方所处虚位。

## 四、在 APP 中的应用建议

1. **高级研习模块使用**
   - 将“孤虚法”呈现在高级规则说明中：
     - 用一张表列出六旬对应的孤/虚位置
   - 若后续引擎支持旬首与敌方方位输入，可进一步做“孤虚提示”。
2. **不作为初级自动提示**
   - 规则偏兵法推演，不建议直接给普通用户自动“吉凶打分”，更适合在专业模式中展示。

## 五、JSON 结构化建议

```json
{
  "id": "gu_xu_fa",
  "name": "孤虚法",
  "ruleSource": "中卷·孤虚法",
  "category": "方位兵法",
  "description": "按六甲旬首划分六旬，分别给出孤位与虚位，用于背孤击虚的攻守推演。",
  "xunMapping": [
    { "xun": "甲子旬", "gu": ["戌", "亥"], "xu": ["己", "辰"] },
    { "xun": "甲戌旬", "gu": ["申", "酉"], "xu": ["寅", "卯"] },
    { "xun": "甲申旬", "gu": ["午", "未"], "xu": ["子", "丑"] },
    { "xun": "甲午旬", "gu": ["己", "辰"], "xu": ["戌", "亥"] },
    { "xun": "甲辰旬", "gu": ["寅", "卯"], "xu": ["申", "酉"] },
    { "xun": "甲寅旬", "gu": ["子", "丑"], "xu": ["午", "未"] }
  ],
  "tendency": "攻守推演用",
  "usageNote": "适合在高级兵法研习中使用，可结合当前旬首与敌方方位，演练背孤击虚的策略。"
}
```